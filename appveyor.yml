version: 1.0.18.2.{build}
pull_requests:
  do_not_increment_build_number: true
configuration: Release
# platform:
# - Win32
# - x64
# build:
#   project: 0cchext_vs13.sln
#   verbosity: minimal 
build_script:
- MSBuild.exe "0cchext_vs13.sln" /verbosity:minimal /logger:"C:\Program Files\AppVeyor\BuildAgent\Appveyor.MSBuildLogger.dll" /p:Configuration=Release /p:Platform="Win32"
- MSBuild.exe "0cchext_vs13.sln" /verbosity:minimal /logger:"C:\Program Files\AppVeyor\BuildAgent\Appveyor.MSBuildLogger.dll" /p:Configuration=Release /p:Platform="x64"
- mkdir bin\x86
- mkdir bin\x64
- copy Release\0cchext_vs13.dll bin\x86\0cchext.dll
- copy x64\Release\0cchext_vs13.dll bin\x64\0cchext.dll
- 7z a -tzip 0cchext.zip bin\*
artifacts:
- path: 0cchext.zip
  name: 0cchext.zip
deploy:
  provider: GitHub
  auth_token:
    secure: 2W0KT4W461lO6PciBBogcYosS1IIIfPomLZ5eBDuMGdeQbTH+KXYTGioiS/M53MJ
  artifact: 0cchext.zip
  draft: false
  prerelease: true
  force_update: true
  on:
    branch: master                 # release from master branch only
    appveyor_repo_tag: true
